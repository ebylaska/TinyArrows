(function(c){var b=Kekule.EmscriptenUtils;var a={usingModulaize:true,moduleName:"IndigoModule",indigoAdaptFuncName:"CreateIndigo"};Kekule.Indigo={_autoEnabled:true,_module:null,_indigo:null,SCRIPT_FILE:"indigo.js",HELPER_SCRIPT_FILE:"indigoAdapter.js",_enableFuncs:[],isScriptLoaded:function(){return b.isSupported(a.moduleName)&&(typeof(c[a.indigoAdaptFuncName])!=="undefined")},getModule:function(){if(!d._module){d._module=b.getRootModule(a.moduleName)}return d._module},getIndigo:function(){if(!d._indigo){var e=d.getModule();if(e){d._indigo=(c[a.indigoAdaptFuncName])(e)}}return d._indigo},getClassCtor:function(e){return b.getClassCtor(e,d.getModule())},isAvailable:function(){return d.getModule()&&d.getIndigo()},enable:function(e){if(!d.isScriptLoaded()){d.loadIndigoScript(document,function(){d._enableAllFunctions();if(e){e()}})}else{d._enableAllFunctions();if(e){e()}}},_enableAllFunctions:function(){if(d.isScriptLoaded()){var f=d._enableFuncs;for(var g=0,e=f.length;g<e;++g){var h=f[g];if(h){h()}}}}};Kekule.Indigo.getIndigoPath=function(){var f=Kekule.scriptSrcInfo.useMinFile;var e=f?"extra/":"_extras/Indigo/";e=Kekule.scriptSrcInfo.path+e;return e};Kekule.Indigo.getIndigoScriptUrl=function(){var e=d.getIndigoPath()+d.SCRIPT_FILE;var f=Kekule.scriptSrcInfo.useMinFile;if(!f){e+=".dev"}return e};Kekule.Indigo.getIndigoHelperScriptUrl=function(){var e=d.getIndigoPath()+d.HELPER_SCRIPT_FILE;return e};Kekule.Indigo.loadIndigoScript=function(g,h){if(!g){g=document}var e=function(){Kekule.Indigo.getIndigo();if(h){h()}};if(!d._scriptLoadedBySelf&&!d.isScriptLoaded()){var f=[d.getIndigoScriptUrl(),d.getIndigoHelperScriptUrl()];Kekule.ScriptFileUtils.appendScriptFiles(g,f,e);d._scriptLoadedBySelf=true}else{d._scriptLoadedBySelf=true;if(h){h()}}};var d=Kekule.Indigo;Kekule.Indigo.AdaptUtils={};Kekule._registerAfterLoadProc(function(){if(d._autoEnabled){d._enableAllFunctions()}})})(this);(function(){var a=Kekule.EmscriptenUtils;var b=Kekule.Indigo;Kekule.IO.IndigoReader=Class.create(Kekule.IO.ChemDataReader,{CLASS_NAME:"Kekule.IO.InChIWriter",doReadData:function(h,d,i){var g=b.getIndigo();var f=g.loadMoleculeFromString(h);if(f>=0){if(i===Kekule.IO.DataFormat.SMILES){g.setOption("smart-layout","true");g.layout(f)}var e=g.molfile(f);g.free(f);var c=Kekule.IO.loadFormatData(e,Kekule.IO.DataFormat.MOL);return c}else{return null}}});Kekule.IO.registerAllIndigoFormats=function(){if(b.isAvailable()){Kekule.IO.ChemDataReaderManager.register("Indigo-smiles",Kekule.IO.IndigoReader,Kekule.IO.DataFormat.SMILES)}};Kekule.IO.enableIndigoFormats=function(){if(!b.isAvailable()){b.loadIndigoScript(document,function(){Kekule.IO.registerAllIndigoFormats()})}else{Kekule.IO.registerAllIndigoFormats()}};b._enableFuncs.push(Kekule.IO.registerAllIndigoFormats)})();